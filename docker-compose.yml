services:
  web:
    build: .
    container_name: stock-manager
    restart: unless-stopped
    env_file:
      - .env
    ports:
      - "8000:8000"
    healthcheck:
      test: ["CMD-SHELL", "curl -f http://localhost:8000/ || exit 1"]
      interval: 30s
      timeout: 5s
      retries: 3

# 개발 시 핫리로드:
#   docker-compose run --service-ports --rm web \
#     uvicorn main:app --reload --host 0.0.0.0 --port 8000
# (볼륨 마운트 시 컨테이너 내부의 frontend/dist/ 가 가려지므로
#  프론트엔드는 별도로 `cd frontend && npm run dev` 로 실행할 것)
